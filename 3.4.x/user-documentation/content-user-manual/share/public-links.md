# 共有リンク

パブリック リンクを使用すると、ユーザーはアセットをダウンロードする許可を持たない外部の人とアセットを共有することができます。この機能は、アセットの事前に生成されたファイルのレンディションへの署名なしのパブリックリンクを提供します。Sitecore Content Hubは、アセットの既存のすべてのレンディションへのパブリックアクセス可能なリンクを自動生成することができます。

注
対象となるファイルが50MBより大きい場合、変換や変換はできません。
ユーザーが50MB以上の画像にパブリックリンクを作成しようとすると、変換は非表示になります。
パブリックリンクは、アセットページ、またはアセットの詳細ページで作成できます。アセットページでは、個々のアセットまたは複数のアセットに対してパブリックリンクを作成することができます。

アセットページでパブリックリンクを作成する
アセット] ページで、共有するアセットまたはアセットを選択します。

その他のアクションアイコンを選択します。

コンテンツページでアクションアイコンを選択します：content_page_select_action_icon.png

パブリックリンクの作成をクリックします。

メニューのパブリックリンクの作成アイコンをクリックします: create_public_links_icon_menu.png

パブリックリンク作成ページが開きます。

パブリックリンクモーダル：public_link_modal.png

パブリックリンクに有効期限を追加するには、カレンダーアイコンをクリックして、リンクの有効期限の日付を選択します。

パブリックリンクにアセットの有効期限を設定する

ノート
公開リンクの有効期限は設定できますが、必須ではないので、ここで日付が選択されていない場合は、リンクの有効期限が切れることはありません。

レンダリングの種類は必須項目です。選択したアセットの任意の共通レンディションを選択することができます。利用可能なレンディションはドロップダウンリストに表示されます。ビデオ アセットは MP4 形式でレンダリングできます。

利用可能なレンディションのリスト： list_of_available_renditions.png

パブリックリンクを作成するためのアセットを送信するには、送信ボタン（public_links_submit_button.png）をクリックしてください。

または、別のパブリックリンクを作成して、リンクの追加をクリックします。

2つ目のパブリックリンクのフィールドを入力します: second_public_link_fields.png

アセットの詳細ページからパブリックリンクを作成
新しいパブリックリンクページでは、以下の情報の一部または全部を入力する必要があります。

グループのプロパティの説明
画像設定 レンディション レンディションの種類は必須項目です。選択したアセットの一般的なレンディションを選択することができます。
低解像度プレビュー
サムネイル
オリジナル
Crop このパラメータは、トリミングのオプションを定義します。
トリミングしない
中央にクロップ
スマートクロップ
カスタムクロップ
クロップオプションについては、クロップオプションのセクションで詳しく説明します。
アスペクト比 このオプションは、アセットの幅と高さの比率を定義します。このフィールドは、クロップオプションがカスタムクロップに設定されている場合にのみ使用できます。可能な値には、Facebook、Instagram、LinkedIn、Twitter、YouTube用のプリセットのアスペクト比が含まれています。
アスペクト比の値については、クロップオプションのセクションで詳しく説明しています。
リサイズ リサイズオプションは、アセットの高さと重さを定義します。有効にすると、高さと幅のフィールドが表示されます。このフィールドは、［クロップ］オプションが［クロップしない］または［カスタム クロップ］に設定されている場合にのみ使用できます。
幅 このオプションは、アセットの幅を定義します。このフィールドは、[サイズ変更] オプションが有効な場合、または [クロップ] オプションが [中央にクロップ] または [スマート クロップ] に設定されている場合にのみ使用できます。
高さ このオプションはアセットの高さを定義します。このフィールドは、[サイズ変更] オプションが有効な場合、または [切り抜き] オプションが [中央に切り抜き] または [スマート クロップ] に設定されている場合にのみ使用できます。
リンク設定 URL パス URL パスは、新しいパブリック リンク用に自動的に生成されます。更新ボタンをクリックすると、新しいURLパスが再生成されます。ユーザーは手動でURLパスを編集することができます。
終了日 カレンダー アイコンをクリックして、リンクの有効期限を選択します。このフィールドはオプションです。値を選択しない場合は、パブリック リンクの有効期限が切れることはありません。
アセットの詳細ページで、その他のアクション アイコン: single_public_links_more_actions.png アイコンをクリックして、メニューから選択します（最後の 1 は、既存のパブリック リンクが 1 つあることを示しています）。

公開リンク作成ページ：single_public_link_creation_page.png

パブリックリンクボタンをクリックして、新しいパブリックリンクを追加します。

新しいパブリックリンクを選択：select_a_new_public_link.png

パブリックリンク作成ページが開きます。

公開リンク作成ページ：single_public_links_creation_page.png

描写
Rendition: Renditionの種類は必須のフィールドです。選択したアセットの任意の共通レンディションを選択することができます。利用可能なレンディションは、ドロップダウン リストに表示されます。ビデオ アセットは MP4 形式でレンダリングできます。

利用可能なレンディションのリスト：single_list_available_renditions.png

クロップオプション
クロップには4つの選択肢があります。

トリミングしないでください

中央にクロップ

スマートクロップ

カスタムクロップ

クロップオプションを選択します。

メニューのクロップオプション: crop_option_in_menu.png

クロップしないでください
Don't Crop はリサイズ可能なレンディションを提供していますが、アスペクト比はロックされています。

ドントクロップリサイズ

寸法 原画・公開リンク
オリジナル - 出力寸法 6000 x 4000 px オリジナルアセット
トリミングしないでください - 出力寸法 3000 x 2000 px トリミングしないでください 公開リンク
中央へのクロップ
中央にクロップ] は、アスペクト比をアンロックした状態でサイズを変更できるレンディションを提供します。このオプションは、クロップボックスを画像の中央に配置します。

中央にクロップ

寸法 原画・公開リンク
オリジナル - 出力寸法 3088 x 4624 px オリジナルアセット
中央へのクロップ - 出力寸法 1000 x 2000 px 中央へのクロップ パブリックリンク
スマートクロップ
スマートクロップは、画像の内容をインテリジェントに検査し、画像の最も重要な部分に自動的に焦点を当ててクロップする機能です。スマートクロップは、画像のエッジ、肌色、飽和色の領域を自動的に検索し、最も重要な特徴の上にクロップボックスを配置しようとします。幅と高さの値は、クロップされた領域の寸法を指定します。

スマートクロップ

寸法 原画・公開リンク
オリジナル - 出力寸法 5000 x 7502 px オリジナルアセット
中央へのクロップ - 出力寸法 1000 x 600 px スマートクロップ パブリックリンク
カスタムクロップ
カスタムクロップ。このオプションでは、アスペクト比をプリセット値のリストから手動で選択することができます。また、幅と高さの値を使って画像のサイズを変更したり、 プレビューパネルの切り抜きボックスを手動で調整したりすることもできます。ユーザーは、このアスペクト比の値を使用して動的にクロップするための選択を使用することができます。このアイコンの反転アイコンをクリックすると、クロップボックスの寸法が反転します。

カスタムクロップ: public_links_custom_crop.gif

ユーザーは選択ツールを使って、画像の切り抜きのための独自の寸法を視覚的に作成することもできます。

カスタムクロップのユーザー選択: public_links_custom_user_crop.gif

カスタムクロップオプションは、アスペクト比フィールドを表示し、以下のプリセット値を提供します。

グループ値
共通フリー、16:9、2:1、3:2、4:3、5:4、オリジナル、正方形。
Facebook Facebookカバー写真, Facebookイベント画像, Facebookハイライト画像, Facebook共有画像。
Instagram インスタグラム インスタグラムフォト、インスタグラムストーリーズ。
LinkedIn LinkedInバナー画像、LinkedIn企業カバー画像、LinkedIn企業写真、LinkedInヒーロー写真、LinkedIn個人背景画像、LinkedIn共有画像、LinkedIn共有リンク。
Twitter Twitterヘッダーフォト、Twitterインストリームフォト。
YouTube YouTubeチャンネルカバーアート、YouTubeチャンネルプロフィール画像。
ノート
新しい画像の寸法は、元の画像の寸法よりも常に小さくなければなりません。
アスペクト比の値は、Sitecore DAMでカスタマイズすることができます。
URLパス
新しい公開リンクのURLパスは自動的に生成されます。更新ボタンをクリックすると、新しい URL パスが再生成されます。ユーザーは手動でURLパスを編集することができます。

URLパスの作成: public_links_url_path.gif

有効期限
カレンダーアイコンをクリックして、リンクの有効期限を選択します。このフィールドはオプションです。値を選択しない場合、パブリック リンクの有効期限が切れることはありません。

パブリックリンクの有効期限

変形
Sitecore DAM™では、外部プラットフォームとの連携を向上させるためにSXAレスポンシブイメージコンセプトをサポートしています。そのため、パブリックリンクのURLでTransformationを直接指定することで、レンディションは動的にリサイズ可能になります。

トランスフォーメーションを使用すると、スーパーユーザーはプリセットのレンディションの設定を管理し、これらのプリセットをレンディションに動的に適用することができます。より具体的には、Transformationsを使用すると、パブリックリンクを再生成しなくても、異なる寸法のレンディションをユーザーに提供することができます。

変換できるファイルのサイズには制限があるので、ユーザーが50MBを超える画像に変換を適用しようとすると、変換は無視されます。

次の画像は、すぐに使える変換の一覧です。

新しい変換のページ

アセットに変換を適用するには、ユーザーは、't'という名前のクエリパラメータとして、パブリックリンクのURLに変換の名前を追加する必要があります。例えば、パブリックリンクのURLに&t=Thumbnailという値を追加することで、「Thumbnail」という名前の変換をアセットに適用することができます。

URLに追加された変換の名前

ノート
ユーザーは、Sitecore DAM™で利用可能なトランスフォームにアクセスして管理することができます。このアクションには、スーパーユーザーの権限が必要です。

既存のトランスフォームの編集または新規トランスフォームの作成の詳細については、トランスフォームを参照してください。

キャッシュ
パブリックリンクが呼び出されると、Sitecore Content Hubはキャッシングシステムを使用して、生成されたファイル（変換や変換からの）を一時的に保存し、さらに使用できるようにします。

注意事項
キャッシュされたファイルは19日後に削除されます。

画像の合併
パブリックリンク変換は、レイヤー化されたフラットな単一画像を作成するために、パブリックリンクのチェーニングを可能にします。このチェーニングは、例の式を使って行います。

public-link-URL/api/content/image1?t=transform&b=image2,image3

ノート
t=transformはオプションです。

次の例では、1つのアセットに対して3つのレンディションを作成しています。

レンディションは以下の通りです。

画像 1: Background_1 という名前で、背景画像として使用します。

背景として使用する画像のパブリックリンクを生成します： set_url_background_layered.png.gif

Image_2: フィルタとして使うために Filter_1 と名付けられたオリジナルのサイズの画像を持っています。

フィルタ画像用のパブリックリンク: public_link_for_filter_image.png

Image_3: 前景画像として使用するために、Product_1という名前のオリジナルサイズの複製を持っています。

前景画像として使用するパブリックリンク：public_link_foreground_image.png

これらの3つの異なるパブリックリンクされたレンディションを連鎖させることができます。

最初のパブリックリンクを開き、例えば、https://Test_Sitecore_Instance.com/api/content/Background_1?

次のパブリックリンクをチェインします。

この例では、image_2 の前に &b= を付けています。

最終的な公開リンクを追加することができます。

この例では、image_3の前にカンマを付けています。

公開リンクの連鎖は次の例で示されています。

似たような比率でアセットが作られていれば、レイヤー化されたパブリックリンクの威力が発揮されます。背景画像アセットとフィルター画像が比率が一致するように作成されていれば、その後、テンプレートとして使用することができます。これらは、製品のSKUショットなどのアセットを前景画像として使用して、制御された交換可能なレイヤード画像を素早く作成するために機能します。

制御された交換可能なレイヤー画像

警告
このオーバーレイは、フィルタリングされた画像と製品画像に透明な背景を持つ.pngファイル形式が使用されているために機能します。パブリックリンクをより大きなパブリックリンクと透明な背景なしで連結すると、以前に連結されたパブリックリンクがカバーされます。

前述したように、トランスフォームが可能であり、このパブリックリンクのレイヤリングも同様です。

Transformationはt=の式を使って追加されます。このTransformationは、チェーンの最初のパブリックリンクの後に追加されます。

したがって、この例では、チェーン化されたパブリックリンクは次のようにレンダリングされます。

https://sitecore_instance.com/api/public/content/image_1?&b=image_2,image_3

を &t=w320 で変換しています。

https://sitecore_instance.com/api/public/content/image_1?&t=w320&b=image_2,image_3

チェーンされた画像はこのサイズでレンダリングされます。

chained_public_link_transformation.gif

トランスフォーメーションの詳細については、トランスフォーメーションをご覧ください。

警告
最初に連結されたパブリックリンクのみが変換可能です。

既知の問題
ベクター画像ファイル形式によっては、トリミングおよび変換機能が利用できない場合があります。.psd や .ai などの一部のプロプライエタリなベクター画像ファイル形式では、この機能が使用できず、レンディションの選択しか表示されません。

ベクター画像には、変換や変換機能がない場合があります： psd_public_link_known_issue_cropping.png

警告
.ai、.psd、.dnなどのレイヤーファイル形式の画像は、元の形式では変換や変換機能は提供されませんが、自動ダウンロードされます。ただし、プレビューとサムネイルは.pngでレンダリングされるため、変換または変換機能はサポートされます。

公開リンク：マスターファイルの更新
アセットのマスターファイルを更新する際には、前のマスターファイル用に作成された既存のパブリックリンクを確認する必要があります。

新しいマスターファイルで利用できなくなったレンディションからパブリックリンクが作成されている場合、ユーザーのレンディションのパブリックリンクはエラーメッセージで失敗します。

public link error could not found the rendition: public_links_error_message.png

この例では、ユーザーは手動クロップを使用してアセットをカスタムダウンロードし、新しいクロップされたレンディションと呼ばれる新しいレンディションも作成しています。

新しいレンディションを作成したカスタムダウンロード：public_links_custom_download_new_rendition.png

次に、先ほど作成したNew cropped renditionを使用して新しいパブリックリンクを作成します。

新しいパブリックが新しいレンディションを使って作成されます。

このパブリックリンクは、外部のユーザーと共有されます。

新しいパブリックリンクが作成されました: public_links_new_public_link_created.png

しかし、後で新しいファイルがアップロードされます。この新しいファイルが新しいマスターファイルになります。

新しいマスターファイルがアップロードされました: public_links_new_master_file.png

その後、この新しいマスターファイルを使用してレンディションを再構築します。以前に作成された新しいクロップされたレンディションは削除され、アセット詳細ページのレンディション一覧に表示されなくなりました。

しかし、この削除されたレンディションを使用して作成されたパブリックリンクは残っています。

パブリックリンクは残っています：public_links_new_master_file_old_link_remains.png

一致する同等のものがないため、ユーザーが公開リンクオプションをクリックしてこの公開リンクを選択すると、エラーメッセージが表示されます。Failed エンティティ '30218' で 'newcroppedrendition_584430cdafb54f61821eb9f8443928a3' という名前のレンディションが見つかりませんでした。

公開リンクはエラーメッセージを返します: public_links_new_master_file_old_link_remains_but_broken.png

外部のユーザーが、ユーザーが共有したパブリック・リンクを閲覧した場合、404エラーが返されます。

ユーザーがパブリックリンクを利用できるようにする必要がある場合は、古いファイルをマスターファイルとしてリセットする必要があります。

古いファイルをマスターとしてリセットします。

古いファイルがマスターとしてリセットされると、レンディションが再生成され、パブリックリンクが再利用できるようになります。

再生成されたレンディションのパブリックリンク: public_links_regenerated.png

パブリック・リンクの作成に使用されたレンディションに同等のものがある場合、既存のパブリック・リンクに問題はありません。

この例では、ユーザはオリジナルのレンディションを使用してパブリック・リンクを作成しています。

オリジナルのレンディションを使用して作成したパブリック・リンク：public_links_using_original_rendition.png

パブリックリンクが作成されると、パブリックリンクを外部ユーザーと共有できるようになります。

オリジナルのレンディションを使用して作成された新しいパブリックリンク：public_links_new_public_link_using_original_rendition.png

新しいファイルがマスターファイルとしてアップロードされた場合

新しいファイルがマスターファイルとしてアップロードされる場合：public_links_new_file_as_master.png

そして、古いマスターファイルのパブリックリンクは、新しいマスターファイルと同等のレンディションを持つレンディションを使用しているため、パブリックリンクは再生成され、したがって、まだ有効です。

